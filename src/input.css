@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark {
    &:where(.dark *),
    &:where([data-theme="dark"] *) {
        @slot;
    }
}

@custom-variant paper {
    &:where([data-theme="paper"] *) {
        @slot;
    }
}

/* Add paragraph spacing styles */
.whitespace-pre-line {
    white-space: pre-line;
}

.whitespace-pre-line br {
    content: "";
    display: block;
    margin-bottom: 1.5em;
}

li {
    text-indent: 0;
    margin-left: 20px;
}

@media (min-width: 768px) {
    li {
        margin-left: 80px;
    }
}

:where(.dark) body,
:where([data-theme="dark"]) body {
    --tw-bg-opacity: 1;
    background-color: rgb(0 0 0 / var(--tw-bg-opacity));
}

@layer base {
    [data-theme="paper"] {
        background-color: #fdf6e3;
        color: #1f2937;
    }

    [data-theme="paper"] body {
        background-color: #fdf6e3;
        color: #1f2937;
    }

    [data-theme="paper"] .prose,
    [data-theme="paper"] .paper\:prose {
        --tw-prose-body: #1f2937;
        --tw-prose-headings: #111827;
        --tw-prose-links: #111827;
        --tw-prose-bold: #111827;
        --tw-prose-counters: #4b5563;
        --tw-prose-bullets: #4b5563;
        --tw-prose-hr: #e4d5b2;
        --tw-prose-quotes: #1f2937;
        --tw-prose-quote-borders: #d4c29a;
        --tw-prose-captions: #4b5563;
        --tw-prose-code: #111827;
        --tw-prose-pre-code: #111827;
        --tw-prose-pre-bg: #f0e6cf;
    }

    [data-theme="paper"] button,
    [data-theme="paper"] button:hover,
    [data-theme="paper"] button:focus {
        background-color: transparent !important;
        color: #111827 !important;
    }
}

@layer utilities {
    @keyframes toast-in {
        from {
            opacity: 0;
            transform: translateY(32px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes toast-out {
        from {
            opacity: 1;
            transform: translateY(0);
        }

        to {
            opacity: 0;
            transform: translateY(-32px);
        }
    }

    .toast-animate-in {
        animation: toast-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) both;
        will-change: opacity, transform;
    }

    .toast-animate-out {
        animation: toast-out 0.4s cubic-bezier(0.4, 0, 0.2, 1) both;
        will-change: opacity, transform;
    }

    @keyframes fadein-choices {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    .animate-fadein-choices {
        animation: fadein-choices 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        will-change: opacity, transform;
    }
}

@layer components {
    .journal-page {
        /* 只保留紙張底色＋噪點紋理 */
        @apply bg-[#f9f6ee] text-stone-700;
        background-image:
            radial-gradient(rgba(0, 0, 0, 0.04) 1px, transparent 1px),
            radial-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px);
        background-size: 3px 3px, 6px 6px;
    }

    .journal-lines {
        @apply relative pl-10 pr-3 py-2;
        background-image: linear-gradient(to bottom, rgba(120,110,90,0.18) 1px, transparent 1px);
        background-size: 100% 1.8rem;
    }

    .journal-choice {
        @apply flex items-center gap-2 px-4 py-2 rounded-full cursor-pointer
               bg-white/70 shadow-sm hover:shadow-md hover:bg-white transition;
    }

    .journal-choice-index {
        @apply font-semibold text-sm text-orange-700;
    }

    /* 深色模式 */
    .dark .journal-page {
        @apply bg-[#26231f] text-[#f1e8d8];
        background-image:
            radial-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 1px),
            radial-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px);
        background-size: 3px 3px, 6px 6px;
    }

    .dark .journal-lines {
        background-image: linear-gradient(to bottom, rgba(255,255,255,0.18) 1px, transparent 1px);
    }

    .dark .journal-choice {
        @apply bg-neutral-800/80 text-[#f3e9db];
    }
}